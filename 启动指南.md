# 知识库管理系统启动指南

## 🚀 启动命令

### 方法1：使用启动脚本
```bash
# 启动Java应用
start_simple.bat

# 启动Python服务（如果需要）
start_python_service.bat
```

### 方法2：手动启动
```bash
# 1. 编译项目
mvn clean compile

# 2. 启动Java应用
mvn spring-boot:run

cloudflared tunnel --url http://localhost:8080

# 3. 启动Python服务（新开终端）
cd python_service
python app_main.py
```

## 🌐 访问地址

启动成功后，可以访问：

- **应用主页**: http://localhost:8080
- **OpenAPI UI**: http://localhost:8080/swagger-ui.html
- **API文档**: http://localhost:8080/v3/api-docs
- **Python服务**: http://localhost:8000

## ⚠️ 启动前检查

### 1. 数据库配置
确保MySQL服务已启动，并检查`application.yml`中的数据库配置：
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/knowledge_base?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: password
```

### 2. 端口检查
确保以下端口未被占用：
- 8080 (Java应用)
- 8000 (Python服务)

### 3. 依赖检查
确保已安装：
- Java 8+
- Maven 3.6+
- Python 3.8+
- MySQL 5.7+

## 🔧 问题排查

### 问题1：应用启动失败
**症状**: 启动时出现错误信息
**解决方案**:
1. 检查数据库连接
2. 检查端口占用
3. 查看详细错误日志

### 问题2：OpenAPI UI无法访问
**症状**: 访问 http://localhost:8080/swagger-ui.html 失败
**解决方案**:
1. 确认应用已正常启动
2. 检查SpringDoc配置
3. 查看应用日志

### 问题3：数据库连接失败
**症状**: 启动时出现数据库连接错误
**解决方案**:
1. 确保MySQL服务运行
2. 检查数据库配置
3. 创建数据库：`CREATE DATABASE knowledge_base;`

## 📋 启动检查清单

- [ ] MySQL服务已启动
- [ ] 数据库`knowledge_base`已创建
- [ ] 端口8080未被占用
- [ ] Java和Maven已正确安装
- [ ] 项目依赖已下载完成

## 🛠️ 测试命令

### 测试应用状态
```bash
python test_app_status.py
```

### 测试API接口
```bash
# 测试健康检查
curl http://localhost:8080/actuator/health

# 测试API文档
curl http://localhost:8080/v3/api-docs
```

## 📝 常见错误及解决方案

### 1. `NullPointerException` in Swagger
**原因**: Springfox与Spring Boot版本不兼容
**解决**: 已更新为SpringDoc OpenAPI 3

### 2. 数据库连接失败
**原因**: MySQL服务未启动或配置错误
**解决**: 启动MySQL服务，检查数据库配置

### 3. 端口被占用
**原因**: 8080端口已被其他应用占用
**解决**: 修改`application.yml`中的端口配置

### 4. 依赖下载失败
**原因**: 网络问题或Maven配置问题
**解决**: 检查网络连接，清理Maven缓存

## 🎯 成功启动标志

应用成功启动后，你应该看到：
1. 控制台显示"Tomcat started on port(s): 8080"
2. 没有错误信息
3. 可以访问 http://localhost:8080/swagger-ui.html

## 📞 获取帮助

如果遇到问题：
1. 查看控制台错误信息
2. 运行`python test_app_status.py`检查状态
3. 检查数据库和网络连接
4. 查看项目日志文件 