# çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿå®Œæ•´å¯åŠ¨æŒ‡å—

## ğŸš€ ç³»ç»Ÿæ¶æ„

æœ¬ç³»ç»ŸåŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š
1. **Java Spring Bootåº”ç”¨** - ä¸»åç«¯æœåŠ¡
2. **PythonæœåŠ¡** - æ–‡æ¡£å¤„ç†å’ŒAIåŠŸèƒ½
3. **Elasticsearch** - çŸ¥è¯†æ£€ç´¢å¼•æ“
4. **MySQLæ•°æ®åº“** - æ•°æ®å­˜å‚¨

## ğŸ“‹ å¯åŠ¨é¡ºåº

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨Elasticsearch

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬
start_elasticsearch.bat

# æ–¹æ³•2ï¼šæ‰‹åŠ¨å¯åŠ¨
cd D:\xmc\elasticsearch-9.1.0-windows-x86_64\elasticsearch-9.1.0
.\bin\elasticsearch.bat
```

**ç­‰å¾…æ—¶é—´**: 30-60ç§’ï¼ˆé¦–æ¬¡å¯åŠ¨è¾ƒæ…¢ï¼‰

**éªŒè¯å¯åŠ¨**:
```bash
# æµ‹è¯•è¿æ¥
python test_es_status.py

# æˆ–ç›´æ¥è®¿é—®
http://localhost:9200
```

### ç¬¬äºŒæ­¥ï¼šè®¾ç½®ElasticsearchçŸ¥è¯†åº“

```bash
# å®‰è£…Pythonä¾èµ–
pip install elasticsearch requests

# è¿è¡Œè®¾ç½®è„šæœ¬
python es_setup.py
```

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨Javaåº”ç”¨

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨PowerShellè„šæœ¬
.\start_app.ps1

# æ–¹æ³•2ï¼šæ‰‹åŠ¨å¯åŠ¨
mvn clean compile
mvn spring-boot:run
```

### ç¬¬å››æ­¥ï¼šå¯åŠ¨PythonæœåŠ¡ï¼ˆå¯é€‰ï¼‰

```bash
# å¯åŠ¨Pythonæ–‡æ¡£å¤„ç†æœåŠ¡
cd python_service
python app_pymupdf_pro.py
```

## ğŸ”§ å„ç»„ä»¶é…ç½®

### 1. Elasticsearché…ç½®

**ç«¯å£**: 9200
**è®¿é—®åœ°å€**: http://localhost:9200
**ç®¡ç†ç•Œé¢**: http://localhost:9200/_cat/indices?v

**çŸ¥è¯†åº“ç´¢å¼•**: `knowledge_base`
- æ”¯æŒä¸­æ–‡åˆ†è¯
- å¤šå­—æ®µæœç´¢
- é«˜äº®æ˜¾ç¤º

### 2. Javaåº”ç”¨é…ç½®

**ç«¯å£**: 8080
**è®¿é—®åœ°å€**: http://localhost:8080
**APIæ–‡æ¡£**: http://localhost:8080/swagger-ui.html

**æ•°æ®åº“**: MySQL (localhost:3306)
**æ•°æ®åº“å**: knowledge_base

### 3. PythonæœåŠ¡é…ç½®

**ç«¯å£**: 8000
**è®¿é—®åœ°å€**: http://localhost:8000
**åŠŸèƒ½**: æ–‡æ¡£å¤„ç†ã€AIå¯¹è¯

## ğŸ“Š éªŒè¯å„ç»„ä»¶çŠ¶æ€

### 1. æ£€æŸ¥Elasticsearch
```bash
python test_es_status.py
```

### 2. æ£€æŸ¥Javaåº”ç”¨
```bash
python test_app_status.py
```

### 3. æ£€æŸ¥PythonæœåŠ¡
```bash
curl http://localhost:8000/health
```

## ğŸŒ è®¿é—®åœ°å€æ±‡æ€»

| ç»„ä»¶ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| Elasticsearch | http://localhost:9200 | ESä¸»æœåŠ¡ |
| ESé›†ç¾¤å¥åº· | http://localhost:9200/_cluster/health | é›†ç¾¤çŠ¶æ€ |
| ESç´¢å¼•ç®¡ç† | http://localhost:9200/_cat/indices?v | ç´¢å¼•åˆ—è¡¨ |
| Javaåº”ç”¨ | http://localhost:8080 | ä¸»åº”ç”¨ |
| APIæ–‡æ¡£ | http://localhost:8080/swagger-ui.html | Swagger UI |
| PythonæœåŠ¡ | http://localhost:8000 | æ–‡æ¡£å¤„ç† |

## ğŸ” çŸ¥è¯†æ£€ç´¢ä½¿ç”¨

### 1. é€šè¿‡APIæœç´¢
```bash
# æœç´¢çŸ¥è¯†
curl -X POST "localhost:8080/api/search" \
  -H "Content-Type: application/json" \
  -d '{"query": "Spring Boot", "page": 1, "size": 10}'
```

### 2. ç›´æ¥è®¿é—®ES
```bash
# æœç´¢æ–‡æ¡£
curl -X POST "localhost:9200/knowledge_base/_search" \
  -H "Content-Type: application/json" \
  -d '{
    "query": {
      "multi_match": {
        "query": "æœç´¢å…³é”®è¯",
        "fields": ["title^2", "content", "chunk_content"]
      }
    }
  }'
```

### 3. æ·»åŠ çŸ¥è¯†æ–‡æ¡£
```bash
# æ·»åŠ å•ä¸ªæ–‡æ¡£
curl -X POST "localhost:9200/knowledge_base/_doc" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "æ–‡æ¡£æ ‡é¢˜",
    "content": "æ–‡æ¡£å†…å®¹",
    "category": "æŠ€æœ¯æ–‡æ¡£",
    "author": "ä½œè€…"
  }'
```

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### 1. Elasticsearchå¯åŠ¨å¤±è´¥

**é—®é¢˜**: ç«¯å£è¢«å ç”¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr :9200

# æ€æ­»å ç”¨è¿›ç¨‹
taskkill /PID <è¿›ç¨‹ID> /F
```

**é—®é¢˜**: å†…å­˜ä¸è¶³
```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
# D:\xmc\elasticsearch-9.1.0-windows-x86_64\elasticsearch-9.1.0\config\jvm.options
# è®¾ç½®: -Xms1g -Xmx1g
```

### 2. Javaåº”ç”¨å¯åŠ¨å¤±è´¥

**é—®é¢˜**: æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥MySQLæœåŠ¡
net start mysql

# æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
mysql -u root -p
CREATE DATABASE IF NOT EXISTS knowledge_base;
```

**é—®é¢˜**: ç«¯å£è¢«å ç”¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr :8080

# æ€æ­»å ç”¨è¿›ç¨‹
taskkill /PID <è¿›ç¨‹ID> /F
```

### 3. PythonæœåŠ¡å¯åŠ¨å¤±è´¥

**é—®é¢˜**: ä¾èµ–ç¼ºå¤±
```bash
# å®‰è£…ä¾èµ–
pip install -r python_service/requirements.txt
```

**é—®é¢˜**: PyMuPDF Proå­—ä½“é—®é¢˜
```bash
# è¿è¡Œå­—ä½“ä¿®å¤è„šæœ¬
python python_service/pymupdf_font_fix.py
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. Elasticsearchä¼˜åŒ–
- è®¾ç½®åˆé€‚çš„å†…å­˜å¤§å°
- å®šæœŸæ¸…ç†æ— ç”¨ç´¢å¼•
- ä½¿ç”¨æ‰¹é‡æ“ä½œæé«˜æ•ˆç‡

### 2. Javaåº”ç”¨ä¼˜åŒ–
- è°ƒæ•´JVMå‚æ•°
- ä½¿ç”¨è¿æ¥æ± 
- å¯ç”¨ç¼“å­˜

### 3. ç³»ç»Ÿæ•´ä½“ä¼˜åŒ–
- ç›‘æ§å„ç»„ä»¶çŠ¶æ€
- å®šæœŸå¤‡ä»½æ•°æ®
- æ—¥å¿—è½®è½¬

## ğŸ”„ é‡å¯æµç¨‹

### å®Œæ•´é‡å¯
```bash
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡
# 2. å¯åŠ¨Elasticsearch
start_elasticsearch.bat

# 3. ç­‰å¾…ESå¯åŠ¨å®Œæˆï¼ˆ30-60ç§’ï¼‰
python test_es_status.py

# 4. è®¾ç½®çŸ¥è¯†åº“
python es_setup.py

# 5. å¯åŠ¨Javaåº”ç”¨
.\start_app.ps1

# 6. å¯åŠ¨PythonæœåŠ¡ï¼ˆå¯é€‰ï¼‰
cd python_service
python app_pymupdf_pro.py
```

### å¿«é€Ÿé‡å¯
```bash
# ä»…é‡å¯Javaåº”ç”¨
mvn spring-boot:run
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ—¥å¿—æŸ¥çœ‹
- **Javaåº”ç”¨**: æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º
- **Elasticsearch**: `logs/elasticsearch.log`
- **PythonæœåŠ¡**: æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º

### è°ƒè¯•å·¥å…·
- **ESçŠ¶æ€æ£€æŸ¥**: `python test_es_status.py`
- **åº”ç”¨çŠ¶æ€æ£€æŸ¥**: `python test_app_status.py`
- **APIæµ‹è¯•**: ä½¿ç”¨Swagger UI

### è”ç³»æ–¹å¼
- æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
- æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
- è¿è¡Œè¯Šæ–­è„šæœ¬ 